# 新しいバリデーション条件の使用例

## 概要

ozn-form v2.8.0+ では、フォームバリデーション条件に以下の新しいルールが追加されました：

- `equals_any_value`: 複数の値のいずれかと一致する場合に条件成立
- `partial_match_value`: 指定した文字列を部分的に含む場合に条件成立

## 使用例

### 1. 複数値の完全一致判定 (`equals_any_value`)

複数の選択肢のいずれかが選ばれた場合に、別のフィールドの入力を必須とする：

```json
{
    "pages": {
        "index": {
            "forms": {
                "materials": {
                    "label": "興味のある商品"
                },
                "materials-etc": {
                    "label": "備考欄",
                    "validate_condition": {
                        "materials": ["required", "equals_any_value:りんごパイ|りんごジャム"]
                    },
                    "validates": ["required"]
                }
            }
        }
    }
}
```

この設定では、`materials` フィールドで「りんごパイ」または「りんごジャム」が選択された場合にのみ、`materials-etc` フィールドが必須となります。

### 2. 部分一致判定 (`partial_match_value`)

指定した文字列を含む選択肢が選ばれた場合に、別のフィールドの入力を必須とする：

```json
{
    "pages": {
        "index": {
            "forms": {
                "materials": {
                    "label": "興味のある商品"
                },
                "materials-etc": {
                    "label": "備考欄",
                    "validate_condition": {
                        "materials": ["required", "partial_match_value:りんご"]
                    },
                    "validates": ["required"]
                }
            }
        }
    }
}
```

この設定では、`materials` フィールドで「りんご」という文字列を含む選択肢（「りんごパイ」「りんごジャム」など）が選択された場合にのみ、`materials-etc` フィールドが必須となります。

### 3. 従来の完全一致判定 (`equals_value`)

従来通り、単一の値との完全一致判定も引き続き使用できます：

```json
{
    "pages": {
        "index": {
            "forms": {
                "materials": {
                    "label": "興味のある商品"
                },
                "materials-etc": {
                    "label": "その他の商品名",
                    "validate_condition": {
                        "materials": ["required", "equals_value:その他"]
                    },
                    "validates": ["required"]
                }
            }
        }
    }
}
```

## 互換性

- `equals_value` ルールは従来通り動作し、後方互換性が保たれています
- 空の値やnull値に対する動作も従来と同じです
- 新しいルールは既存のバリデーション条件と組み合わせて使用できます